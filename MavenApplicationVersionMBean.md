# Maven Application Version MBean #

The Maven Application Version MBean extracts the application version from the POM file generated by Maven and exposes it in a JMX MBean.

## Spring Configuration ##

  * Spring namespace based configuration:
```
<beans ...
   xmlns:management="http://www.xebia.fr/schema/xebia-management-extras"
   xsi:schemaLocation="...
      http://www.xebia.fr/schema/xebia-management-extras http://www.xebia.fr/schema/management/xebia-management-extras.xsd">

   <!-- MBeanExporter is in charge of registering the Application Version MBean -->
   <context:mbean-export />

   <management:application-version-mbean />

</beans>
```

  * Spring raw configuration:
```
 <beans ... >
   <!-- MBeanExporter is in charge of registering the Application Version MBean -->
   <context:mbean-server />

   <bean id="webApplicationMavenInformation" 
      class="fr.xebia.management.maven.WebApplicationMavenInformation" />
   ...
 </beans>
```

## JMX MBean Object Name ##

  * JMX Object Name: `"fr.xebia:type=WebApplicationMavenInformation[,name=${spring-bean-name}]"` where
  * `"${spring-bean-name}"` is the name of the spring object ; if no name is defined, the `name`Â attribute is omitted,
  * the `fr.xebia` domain name is configurable via the `jmxDomain` attribute.

## JMX MBeans attributes ##

Here are the JMX attributes exposed by the MBean:

| **Name** | **Description** |
|:---------|:----------------|
| `Version` | Maven `${project.version} ` property extracted from `${webapp-home}/META-INF/${groupId}/${artifactId}/pom.properties` file |
| `GroupId` | Maven `${project.groupId} ` property extracted from `${webapp-home}/META-INF/${groupId}/${artifactId}/pom.properties` file |
| `ArtifactId` | Maven `${project.artifactId} ` property extracted from `${webapp-home}/META-INF/${groupId}/${artifactId}/pom.properties` file |
| `FullyQualifiedArtifactIdentifier` | Maven `${project.groupId}:${project.artifactId}:${project.version} ` properties extracted from `${webapp-home}/META-INF/${groupId}/${artifactId}/pom.properties` file |

If the `pom.properties` file is not found, the default value `#UNKNOWN#` is used and the following log message is emitted during initialization:
```
WARN: Folder .../META-INF/maven/ not found. Application probably in development mode, could not determine application maven information
```

## JSP / VisualVM rendering ##

  * JSP monitoring page : [(source)](http://xebia-france.googlecode.com/svn/management/xebia-management-extras/trunk/src/main/webapp/jmx/maven-application-version.jsp),
> > <a href='http://xebia-france.googlecode.com/svn/management/xebia-management-extras/trunk/src/site/monitoring-jsp-application-version.png'><img src='http://xebia-france.googlecode.com/svn/management/xebia-management-extras/trunk/src/site/monitoring-jsp-application-version.png' height='150' /></a>
  * Visual VM / JConsole view:
> > <a href='http://xebia-france.googlecode.com/svn/management/xebia-management-extras/trunk/src/site/monitoring-visualvm-application-version.png'><img src='http://xebia-france.googlecode.com/svn/management/xebia-management-extras/trunk/src/site/monitoring-visualvm-application-version.png' height='200' /></a>

## How to integrate the xebia-management-extras` library in your project ? ##

See [XebiaManagementExtrasInstallation](XebiaManagementExtrasInstallation.md).
